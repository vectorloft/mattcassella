var tcS3_admin,frame=!!wp.media&&wp.media.view.Modal.prototype;!function(a){tcS3_admin={init:function(){var b=this;a(b.onReady.bind(b))},onReady:function(){this.binds()},binds:function(){var b=this;a("body").on("click","a.push_single_to_S3",{context:b},b.pushToS3),a("body").on("click","input#s3_sync",{context:b},b.s3_sync),a("body").on("click","#tcS3_mark_all_attached",{context:b},b.mark_all_attached)},pushToS3:function(b){b.preventDefault();var c=a(this).closest("tr"),d=b.data.context;c.animate({opacity:.25},600),a.ajax({url:ajaxurl,success:function(a){d.ajaxOutput=a},error:function(a,b,c){console.log("Error: "+c)},complete:function(){c.animate({opacity:1},600),"undefined"!=typeof d.ajaxOutput.success?(c.find(".notuploaded").removeClass("active"),c.find(".uploaded").addClass("active")):(c.find(".notuploaded").addClass("active"),c.find(".uploaded").removeClass("active"))},dataType:"json",type:"POST",data:{postID:a(this).data("postid"),action:"push_single"}})},s3_sync:function(b){var c,d=a(".progressbar").progressbar({value:0});a.ajax({url:ajaxurl,success:function(a){c=a},error:function(a,b,c){console.log("Error: "+c)},complete:function(){for(i=0;i<c.length;i++)percentage=i/(c.length-1)*100,a.ajax({async:!1,url:ajaxurl,success:function(b){d.progressbar("value",percentage),a(".progressbar-label").html(percentage+"%")},error:function(a,b,c){console.log("Error: "+c)},data:{postID:c[i],action:"push_single"},dataType:"json",type:"POST"})},data:{action:"get_attachment_ids",full_sync:1},dataType:"json",type:"POST"})},mark_all_attached:function(b){a.ajax({url:ajaxurl,success:function(a){},error:function(a,b,c){console.log("Error: "+c)},complete:function(){},data:{action:"mark_all_synced"},dataType:"json",type:"POST"})},loadAds:function(){var b=this,c='<div class=\'ad\'><ins class="adsbygoogle" style="display:block;" data-ad-client="ca-pub-2243841471703944" data-ad-slot="4841238781" data-ad-format="auto"></ins></div>';a.getScript("//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",function(){b.renderAds()}),frame&&frame.on("open",function(){console.log("hello!"),a(".media-modal").find(".media-toolbar-secondary").width(490).prepend(c),a(".attachment-info").find(".actions").after(c),b.renderAds()})},renderAds:function(){a(".ad ins.adsbygoogle:not([data-adsbygoogle-status='done'])").each(function(){(adsbygoogle=window.adsbygoogle||[]).push({})})}},tcS3_admin.init()}(jQuery);